<ion-view view-title="Admin">
  <ion-content padding="true" ng-init="getPolls();allVotes()" style="background-color:#262626">
    <div class="card padding">
      <h5 style="font-weight:bold">This Week's Voters</h5>
      <ul class="card padding">
        <li ng-show="voters != 'empty'" ng-repeat="vote in voters" class="ion-person">
           {{vote.first_name}}: {{vote.email}}
        </li>
        <li ng-show="voters == 'empty'">No votes this week yet</li>
      </ul>
      <div ng-show="voters != 'empty'" style="display:block; margin-right:10px" class="ion-android-star-outline">
        This Week's Winner:
        <div ng-show="clicked">
          <div>
            Name: {{winner.first_name}}
          </div>
          <div>
            Email: {{winner.email}}
          </div>
        </div>
      </div>
      <button ng-show="voters != 'empty'" style="display:block" type="button" class="button button-small" ng-click="selectRandom(); clicked = true"> Pick random</button>
    </div>
    <div class="polls">
      <button class="button button-positive showCreate" style="background-color: #B8860B;" ng-click="createPollToggle = !createPollToggle" ng-hide="createPollToggle">Create New Poll</button>
      <div class="card padding createpoll" ng-hide="!createPollToggle">
        <form ng-submit="createPoll(); getPolls(); createPollToggle = !createPollToggle; resetFor">
          <div class="list">
            <label class="item item-input" style="display:inline-block; width:80%;border-color:black">
              <input type="text" placeholder="Poll title/question" ng-model="addPoll.title">
            </label>
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #1" ng-model="addPoll.answers[0].text">
            </label>
            <button type="button" class="button button-icon icon ion-camera" ng-click="upload(0)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[0].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #2" ng-model="addPoll.answers[1].text">
            </label>
            <button type="button" class="button button-icon icon ion-camera" ng-click="upload(1)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[1].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #3" ng-model="addPoll.answers[2].text">
            </label>
            <button type="button" class="button button-icon icon ion-camera" ng-click="upload(2)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[2].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[0]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #4" ng-model="addPoll.answers[3].text">
            </label>
            <button type="button" ng-hide="addPoll.show[0]" class="button button-icon icon ion-camera" ng-click="upload(3)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[3].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[1]" style="display:inline-block; width:80%;">
              <input type="text" ng-hide="addPoll.show[1]" placeholder="Poll answer #5" ng-model="addPoll.answers[4].text">
            </label>
            <button type="button" ng-hide="addPoll.show[1]" class="button button-icon icon ion-camera" ng-click="upload(4)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[4].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[2]" style="display:inline-block; width:80%;">
              <input type="text" ng-hide="addPoll.show[2]" placeholder="Poll answer #6" ng-model="addPoll.answers[5].text">
            </label>
            <button type="button" ng-hide="addPoll.show[2]" class="button button-icon icon ion-camera" ng-click="upload(5)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[5].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[3]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #7" ng-model="addPoll.answers[6].text">
            </label>
            <button type="button" ng-hide="addPoll.show[3]" class="button button-icon icon ion-camera" ng-click="upload(6)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[6].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[4]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #8" ng-model="addPoll.answers[7].text">
            </label>
            <button type="button" ng-hide="addPoll.show[4]" class="button button-icon icon ion-camera" ng-click="upload(7)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[7].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[5]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #9" ng-model="addPoll.answers[8].text">
            </label>
            <button type="button" ng-hide="addPoll.show[5]" class="button button-icon icon ion-camera" ng-click="upload(8)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[8].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input" ng-hide="addPoll.show[6]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #10" ng-model="addPoll.answers[9].text">
            </label>
            <button type="button" ng-hide="addPoll.show[6]" class="button button-icon icon ion-camera" ng-click="upload(9)" style="display:inline-block; width:10%;color:black"></button>
            <div style="color:green;display:inline-block;width:5%;" ng-show="addPoll.answers[9].img.length>1" class="ion-checkmark"></div>
            <label class="item item-input"  style="width:80%;">
              <div class="title_toggle">Active?</div>
            <label class="toggle">
             <input type="checkbox" ng-model="addPoll.active" ng-value="true">
             <div class="track">
               <div class="handle"></div>
             </div>
           </label>
          </label>
          </div>
          <button type="button" class="button button-clear button-positive" ng-click="unhide()">
            + Add answer
          </button>
          <input type="submit" class="button button-block button-energized" style="background-color: #B8860B;" value="Create Poll">
        </form>
        <input type="button" class="button button-block button-energized"  style="background-color: #262626;"value="Cancel" ng-click="createPollToggle = !createPollToggle">
      </div>
    </div>
    <div>
      <div class="card" ng-model="polls" ng-repeat="poll in polls track by $index">
        <div class="item item-text-wrap">
          <div class="top" style="display:block;border-bottom:1px solid black;">
              <div class="titlepoll"  style="display:inline-block">
                Poll Title: {{poll.title}}
              </div>
              <div class="buttons" style="display:inline-block; float:left;margin-bottom:10px;margin-top:10px">
                <div style="display:inline-block;margin-right:40px;">
                <div type="button" ng-class="poll.active == 'true' ? 'ion-toggle-filled' : 'ion-toggle'" ng-click="changeStatus(poll.id)" style="display:inline-block;"> </div>
                <div ng-click="changeStatus(poll.id)" style="display:inline-block;">
                  {{poll.active == 'true' ? 'active' : 'not active'}}
                </div>
              </div>
                <a class="ion-trash-a" ng-click="deletePoll(poll.id)" style="float:right; cursor:pointer;color:black"></a>
                <a class="ion-ios-refresh" ng-click="resetVotes(poll.id)" style="float:right; cursor:pointer;margin-right:20px;color:black;border-right:1px solid black;padding-right:20px;"> reset votes</a>
              </div>
            </div>
                  <div class="card" ng-repeat="answer in poll.answers" style="width: 100%">
                      <div class="item item-text-wrap">
                        {{answer.answer}}
                        <div style="float:right">
                          votes: {{answer.votes.length}}
                        </div>
                      </div>
                    </div>
              <div ng-repeat="answer in poll.answers">
                {{answer.text}}
              </div>
          </div>
      </div>
    </div>
  </ion-content>
</ion-view>
