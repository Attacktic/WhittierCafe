<ion-view view-title="Admin">
  <ion-content padding="true" ng-init="getPolls()">
    <img ng-src="{{collection.selectedImage}}" style="width:100%; height: auto;"/>
    <div class="polls">
      <button class="button button-positive showCreate" ng-click="createPollToggle = !createPollToggle" ng-hide="createPollToggle">Create New Poll</button>
      <div class="createpoll" ng-hide="!createPollToggle">
        <button class="button button-clear button-positive" ng-click="unhide()">
          + Add answer
        </button>
        <form ng-submit="createPoll(); getPolls(); createPollToggle = !createPollToggle; resetFor">
          <div class="list">
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll title/question" ng-model="addPoll.title">
            </label>
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #1" ng-model="addPoll.answers[0].text">
            </label>
            <button type="button" class="button button-icon icon ion-camera" ng-click="upload(0)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #2" ng-model="addPoll.answers[1].text">
            </label>
            <button type="button" class="button button-icon icon ion-camera" ng-click="upload(1)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #3" ng-model="addPoll.answers[2].text">
            </label>
            <button type="button" class="button button-icon icon ion-camera" ng-click="upload(2)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[0]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #4" ng-model="addPoll.answers[3].text">
            </label>
            <button type="button" ng-hide="addPoll.show[0]" class="button button-icon icon ion-camera" ng-click="upload(3)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[1]" style="display:inline-block; width:80%;">
              <input type="text" ng-hide="addPoll.show[1]" placeholder="Poll answer #5" ng-model="addPoll.answers[4].text">
            </label>
            <button type="button" ng-hide="addPoll.show[1]" class="button button-icon icon ion-camera" ng-click="upload(4)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[2]" style="display:inline-block; width:80%;">
              <input type="text" ng-hide="addPoll.show[2]" placeholder="Poll answer #6" ng-model="addPoll.answers[5].text">
            </label>
            <button type="button" ng-hide="addPoll.show[2]" class="button button-icon icon ion-camera" ng-click="upload(5)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[3]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #7" ng-model="addPoll.answers[6].text">
            </label>
            <button type="button" ng-hide="addPoll.show[3]" class="button button-icon icon ion-camera" ng-click="upload(6)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[4]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #8" ng-model="addPoll.answers[7].text">
            </label>
            <button type="button" ng-hide="addPoll.show[4]" class="button button-icon icon ion-camera" ng-click="upload(7)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[5]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #9" ng-model="addPoll.answers[8].text">
            </label>
            <button type="button" ng-hide="addPoll.show[5]" class="button button-icon icon ion-camera" ng-click="upload(8)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input" ng-hide="addPoll.show[6]" style="display:inline-block; width:80%;">
              <input type="text" placeholder="Poll answer #10" ng-model="addPoll.answers[9].text">
            </label>
            <button type="button" ng-hide="addPoll.show[6]" class="button button-icon icon ion-camera" ng-click="upload(9)" style="display:inline-block; width:16%;"></button>
            <label class="item item-input">
              <div class="title_toggle">Active?</div>
            <label class="toggle">
             <input type="checkbox" ng-model="addPoll.active" ng-value="true">
             <div class="track">
               <div class="handle"></div>
             </div>
           </label>
          </label>
          </div>
          <input type="submit" class="button button-block button-positive" value="Create Poll">
        </form>
        <input type="button" class="button button-block button-assertive" value="Cancel" ng-click="createPollToggle = !createPollToggle">
      </div>
    </div>
    <div>
      <div class="card" ng-model="polls" ng-repeat="poll in polls track by $index">
        <div class="item item-text-wrap">
              {{poll.title}}
              <div ng-show="poll.active == 'true'">active</div>
              <div ng-show="poll.active == 'false'">unnactive</div>
              <button type="button" ng-click="changeStatus(poll.id)"></button>
              <a ng-click="deletePoll(poll.id)" style="float:right; cursor:pointer"> delete</a>
              <a ng-click="resetVotes(poll.id)" style="float:right; cursor:pointer">reset votes </a>
                  <div class="card" ng-repeat="answer in poll.answers">
                      <div class="item item-text-wrap">
                        {{answer.answer}} {{answer.img}}
                        <div style="float:right">
                          votes: {{answer.votes.length}}
                        </div>
                      </div>
                    </div>
              <div ng-repeat="answer in poll.answers">
                {{answer.text}}
              </div>
          </div>
      </div>
    </div>
  </ion-content>
</ion-view>
